<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>TommyDS</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="tommy.css" rel="stylesheet" type="text/css">
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-21967501-2']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body>
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_108ac671c162006792b32851db85b9de.html">tommyds</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">tommytrie.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Trie optimized for cache utilization.  
<a href="#details">More...</a></p>

<p><a href="tommytrie_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtommy__trie__struct.html">tommy_trie_struct</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trie container type.  <a href="structtommy__trie__struct.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:acfe06eea58ed9535e42b41101c6fcd9d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tommytrie_8h.html#acfe06eea58ed9535e42b41101c6fcd9d">TOMMY_TRIE_BIT</a>&#160;&#160;&#160;32</td></tr>
<tr class="memdesc:acfe06eea58ed9535e42b41101c6fcd9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of bits of the elements to store in the trie.  <a href="tommytrie_8h.html#acfe06eea58ed9535e42b41101c6fcd9d">More...</a><br /></td></tr>
<tr class="separator:acfe06eea58ed9535e42b41101c6fcd9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a749b14cb7dba5c94bbca91ba56bcfd62"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tommytrie_8h.html#a749b14cb7dba5c94bbca91ba56bcfd62">TOMMY_TRIE_TREE_MAX</a>&#160;&#160;&#160;(64 / sizeof(void*))</td></tr>
<tr class="memdesc:a749b14cb7dba5c94bbca91ba56bcfd62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of branches on each inner node.  <a href="tommytrie_8h.html#a749b14cb7dba5c94bbca91ba56bcfd62">More...</a><br /></td></tr>
<tr class="separator:a749b14cb7dba5c94bbca91ba56bcfd62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12bee56b6b3ae6ee817d641f148220f1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tommytrie_8h.html#a12bee56b6b3ae6ee817d641f148220f1">TOMMY_TRIE_BLOCK_SIZE</a>&#160;&#160;&#160;(<a class="el" href="tommytrie_8h.html#a749b14cb7dba5c94bbca91ba56bcfd62">TOMMY_TRIE_TREE_MAX</a> * sizeof(void*))</td></tr>
<tr class="memdesc:a12bee56b6b3ae6ee817d641f148220f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trie block size.  <a href="tommytrie_8h.html#a12bee56b6b3ae6ee817d641f148220f1">More...</a><br /></td></tr>
<tr class="separator:a12bee56b6b3ae6ee817d641f148220f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a72ea06a04c9d0609d048e2ef40e8a71c"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="tommytypes_8h.html#a1e8ddf0d3a75d9c875f08324c0d98628">tommy_node</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tommytrie_8h.html#a72ea06a04c9d0609d048e2ef40e8a71c">tommy_trie_node</a></td></tr>
<tr class="memdesc:a72ea06a04c9d0609d048e2ef40e8a71c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trie node.  <a href="tommytrie_8h.html#a72ea06a04c9d0609d048e2ef40e8a71c">More...</a><br /></td></tr>
<tr class="separator:a72ea06a04c9d0609d048e2ef40e8a71c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a77169f497c9ab7b03d80cf456a08e4"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structtommy__trie__struct.html">tommy_trie_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tommytrie_8h.html#a3a77169f497c9ab7b03d80cf456a08e4">tommy_trie</a></td></tr>
<tr class="memdesc:a3a77169f497c9ab7b03d80cf456a08e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trie container type.  <a href="tommytrie_8h.html#a3a77169f497c9ab7b03d80cf456a08e4">More...</a><br /></td></tr>
<tr class="separator:a3a77169f497c9ab7b03d80cf456a08e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5789615d52182c68ce4476150a638e24"><td class="memItemLeft" align="right" valign="top">TOMMY_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tommytrie_8h.html#a5789615d52182c68ce4476150a638e24">tommy_trie_init</a> (<a class="el" href="tommytrie_8h.html#a3a77169f497c9ab7b03d80cf456a08e4">tommy_trie</a> *trie, <a class="el" href="tommyalloc_8h.html#a801d4a7b732fdecfdb5e099310196821">tommy_allocator</a> *alloc)</td></tr>
<tr class="memdesc:a5789615d52182c68ce4476150a638e24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the trie.  <a href="tommytrie_8h.html#a5789615d52182c68ce4476150a638e24">More...</a><br /></td></tr>
<tr class="separator:a5789615d52182c68ce4476150a638e24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c6183ca22da291868f13cc773bf0ea4"><td class="memItemLeft" align="right" valign="top">TOMMY_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tommytrie_8h.html#a6c6183ca22da291868f13cc773bf0ea4">tommy_trie_insert</a> (<a class="el" href="tommytrie_8h.html#a3a77169f497c9ab7b03d80cf456a08e4">tommy_trie</a> *trie, <a class="el" href="tommytrie_8h.html#a72ea06a04c9d0609d048e2ef40e8a71c">tommy_trie_node</a> *node, void *data, <a class="el" href="tommytypes_8h.html#aeaea2252c325c803189bcac29abeb0ef">tommy_key_t</a> key)</td></tr>
<tr class="memdesc:a6c6183ca22da291868f13cc773bf0ea4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts an element in the trie.  <a href="tommytrie_8h.html#a6c6183ca22da291868f13cc773bf0ea4">More...</a><br /></td></tr>
<tr class="separator:a6c6183ca22da291868f13cc773bf0ea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a68f3e28cf8e964cdd94964bde131a8"><td class="memItemLeft" align="right" valign="top">TOMMY_API void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tommytrie_8h.html#a2a68f3e28cf8e964cdd94964bde131a8">tommy_trie_remove</a> (<a class="el" href="tommytrie_8h.html#a3a77169f497c9ab7b03d80cf456a08e4">tommy_trie</a> *trie, <a class="el" href="tommytypes_8h.html#aeaea2252c325c803189bcac29abeb0ef">tommy_key_t</a> key)</td></tr>
<tr class="memdesc:a2a68f3e28cf8e964cdd94964bde131a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches and removes the first element with the specified key.  <a href="tommytrie_8h.html#a2a68f3e28cf8e964cdd94964bde131a8">More...</a><br /></td></tr>
<tr class="separator:a2a68f3e28cf8e964cdd94964bde131a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6caed60ebeff23b82fe1b536852688a"><td class="memItemLeft" align="right" valign="top">TOMMY_API <a class="el" href="tommytrie_8h.html#a72ea06a04c9d0609d048e2ef40e8a71c">tommy_trie_node</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tommytrie_8h.html#ab6caed60ebeff23b82fe1b536852688a">tommy_trie_bucket</a> (<a class="el" href="tommytrie_8h.html#a3a77169f497c9ab7b03d80cf456a08e4">tommy_trie</a> *trie, <a class="el" href="tommytypes_8h.html#aeaea2252c325c803189bcac29abeb0ef">tommy_key_t</a> key)</td></tr>
<tr class="memdesc:ab6caed60ebeff23b82fe1b536852688a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the bucket of the specified key.  <a href="tommytrie_8h.html#ab6caed60ebeff23b82fe1b536852688a">More...</a><br /></td></tr>
<tr class="separator:ab6caed60ebeff23b82fe1b536852688a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83774ac7328017d6935fc88c3879fb23"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tommytrie_8h.html#a83774ac7328017d6935fc88c3879fb23">tommy_trie_search</a> (<a class="el" href="tommytrie_8h.html#a3a77169f497c9ab7b03d80cf456a08e4">tommy_trie</a> *trie, <a class="el" href="tommytypes_8h.html#aeaea2252c325c803189bcac29abeb0ef">tommy_key_t</a> key)</td></tr>
<tr class="memdesc:a83774ac7328017d6935fc88c3879fb23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches an element in the trie.  <a href="tommytrie_8h.html#a83774ac7328017d6935fc88c3879fb23">More...</a><br /></td></tr>
<tr class="separator:a83774ac7328017d6935fc88c3879fb23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a972019821a9ce9c9df9ad7979c5193b8"><td class="memItemLeft" align="right" valign="top">TOMMY_API void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tommytrie_8h.html#a972019821a9ce9c9df9ad7979c5193b8">tommy_trie_remove_existing</a> (<a class="el" href="tommytrie_8h.html#a3a77169f497c9ab7b03d80cf456a08e4">tommy_trie</a> *trie, <a class="el" href="tommytrie_8h.html#a72ea06a04c9d0609d048e2ef40e8a71c">tommy_trie_node</a> *node)</td></tr>
<tr class="memdesc:a972019821a9ce9c9df9ad7979c5193b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes an element from the trie.  <a href="tommytrie_8h.html#a972019821a9ce9c9df9ad7979c5193b8">More...</a><br /></td></tr>
<tr class="separator:a972019821a9ce9c9df9ad7979c5193b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa68840eb4d3bb2fd8254d667b27f0919"><td class="memItemLeft" align="right" valign="top"><a class="el" href="tommytypes_8h.html#a898769f6c0236ab854368a0d93349ab9">tommy_size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tommytrie_8h.html#aa68840eb4d3bb2fd8254d667b27f0919">tommy_trie_count</a> (<a class="el" href="tommytrie_8h.html#a3a77169f497c9ab7b03d80cf456a08e4">tommy_trie</a> *trie)</td></tr>
<tr class="memdesc:aa68840eb4d3bb2fd8254d667b27f0919"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the number of elements.  <a href="tommytrie_8h.html#aa68840eb4d3bb2fd8254d667b27f0919">More...</a><br /></td></tr>
<tr class="separator:aa68840eb4d3bb2fd8254d667b27f0919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d1717309057bdcf2dd30afc3ea956ac"><td class="memItemLeft" align="right" valign="top">TOMMY_API <a class="el" href="tommytypes_8h.html#a898769f6c0236ab854368a0d93349ab9">tommy_size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tommytrie_8h.html#a5d1717309057bdcf2dd30afc3ea956ac">tommy_trie_memory_usage</a> (<a class="el" href="tommytrie_8h.html#a3a77169f497c9ab7b03d80cf456a08e4">tommy_trie</a> *trie)</td></tr>
<tr class="memdesc:a5d1717309057bdcf2dd30afc3ea956ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the size of allocated memory.  <a href="tommytrie_8h.html#a5d1717309057bdcf2dd30afc3ea956ac">More...</a><br /></td></tr>
<tr class="separator:a5d1717309057bdcf2dd30afc3ea956ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Trie optimized for cache utilization. </p>
<p >This trie is a standard implementation that stores elements in the order defined by the key.</p>
<p >It needs an external allocator for the inner nodes in the trie.</p>
<p >You can control the number of branches of each node using the <a class="el" href="tommytrie_8h.html#a749b14cb7dba5c94bbca91ba56bcfd62" title="Number of branches on each inner node.">TOMMY_TRIE_TREE_MAX</a> define. More branches imply more speed, but a bigger memory occupation.</p>
<p >Compared to <a class="el" href="tommytrieinp_8h.html#aa2db3b1aa9bfc7cfc87c19aa9777634e" title="Trie container type.">tommy_trie_inplace</a> you have to provide a <a class="el" href="tommyalloc_8h.html#a801d4a7b732fdecfdb5e099310196821" title="Allocator of fixed size blocks.">tommy_allocator</a> allocator. Note that the C malloc() is too slow to fulfill this role.</p>
<p >To initialize the trie you have to call <a class="el" href="tommyalloc_8h.html#ab797575f3063b21122aab102447b8081" title="Initializes the allocator.">tommy_allocator_init()</a> to initialize the allocator, and <a class="el" href="tommytrie_8h.html#a5789615d52182c68ce4476150a638e24" title="Initializes the trie.">tommy_trie_init()</a> for the trie.</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="structtommy__allocator__struct.html">tommy_allocator</a> alloc;</div>
<div class="line"><a class="code hl_struct" href="structtommy__trie__struct.html">tommy_trie</a> trie;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="tommyalloc_8h.html#ab797575f3063b21122aab102447b8081">tommy_allocator_init</a>(&amp;alloc, <a class="code hl_define" href="tommytrie_8h.html#a12bee56b6b3ae6ee817d641f148220f1">TOMMY_TRIE_BLOCK_SIZE</a>, <a class="code hl_define" href="tommytrie_8h.html#a12bee56b6b3ae6ee817d641f148220f1">TOMMY_TRIE_BLOCK_SIZE</a>);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="tommytrie_8h.html#a5789615d52182c68ce4476150a638e24">tommy_trie_init</a>(&amp;trie, &amp;alloc);</div>
<div class="ttc" id="astructtommy__allocator__struct_html"><div class="ttname"><a href="structtommy__allocator__struct.html">tommy_allocator_struct</a></div><div class="ttdoc">Allocator of fixed size blocks.</div><div class="ttdef"><b>Definition:</b> tommyalloc.h:51</div></div>
<div class="ttc" id="astructtommy__trie__struct_html"><div class="ttname"><a href="structtommy__trie__struct.html">tommy_trie_struct</a></div><div class="ttdoc">Trie container type.</div><div class="ttdef"><b>Definition:</b> tommytrie.h:185</div></div>
<div class="ttc" id="atommyalloc_8h_html_ab797575f3063b21122aab102447b8081"><div class="ttname"><a href="tommyalloc_8h.html#ab797575f3063b21122aab102447b8081">tommy_allocator_init</a></div><div class="ttdeci">TOMMY_API void tommy_allocator_init(tommy_allocator *alloc, tommy_size_t block_size, tommy_size_t align_size)</div><div class="ttdoc">Initializes the allocator.</div></div>
<div class="ttc" id="atommytrie_8h_html_a12bee56b6b3ae6ee817d641f148220f1"><div class="ttname"><a href="tommytrie_8h.html#a12bee56b6b3ae6ee817d641f148220f1">TOMMY_TRIE_BLOCK_SIZE</a></div><div class="ttdeci">#define TOMMY_TRIE_BLOCK_SIZE</div><div class="ttdoc">Trie block size.</div><div class="ttdef"><b>Definition:</b> tommytrie.h:157</div></div>
<div class="ttc" id="atommytrie_8h_html_a5789615d52182c68ce4476150a638e24"><div class="ttname"><a href="tommytrie_8h.html#a5789615d52182c68ce4476150a638e24">tommy_trie_init</a></div><div class="ttdeci">TOMMY_API void tommy_trie_init(tommy_trie *trie, tommy_allocator *alloc)</div><div class="ttdoc">Initializes the trie.</div></div>
</div><!-- fragment --><p >To insert elements in the trie you have to call <a class="el" href="tommytrie_8h.html#a6c6183ca22da291868f13cc773bf0ea4" title="Inserts an element in the trie.">tommy_trie_insert()</a> for each element. In the insertion call you have to specify the address of the node, the address of the object, and the key value to use. The address of the object is used to initialize the <a class="el" href="structtommy__node__struct.html#a6210792ec52fa1efbfb44cf4557d9b6f" title="Pointer to the object containing the node.">tommy_node::data</a> field of the node, and the key to initialize the tommy_node::key field.</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>object {</div>
<div class="line">    <span class="keywordtype">int</span> value;</div>
<div class="line">    <span class="comment">// other fields</span></div>
<div class="line">    <a class="code hl_struct" href="structtommy__node__struct.html">tommy_node</a> node;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>object* obj = malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <span class="keywordtype">object</span>)); <span class="comment">// creates the object</span></div>
<div class="line"> </div>
<div class="line">obj-&gt;value = ...; <span class="comment">// initializes the object</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="tommytrie_8h.html#a6c6183ca22da291868f13cc773bf0ea4">tommy_trie_insert</a>(&amp;trie, &amp;obj-&gt;node, obj, obj-&gt;value); <span class="comment">// inserts the object</span></div>
<div class="ttc" id="astructtommy__node__struct_html"><div class="ttname"><a href="structtommy__node__struct.html">tommy_node_struct</a></div><div class="ttdoc">Data structure node.</div><div class="ttdef"><b>Definition:</b> tommytypes.h:211</div></div>
<div class="ttc" id="atommytrie_8h_html_a6c6183ca22da291868f13cc773bf0ea4"><div class="ttname"><a href="tommytrie_8h.html#a6c6183ca22da291868f13cc773bf0ea4">tommy_trie_insert</a></div><div class="ttdeci">TOMMY_API void tommy_trie_insert(tommy_trie *trie, tommy_trie_node *node, void *data, tommy_key_t key)</div><div class="ttdoc">Inserts an element in the trie.</div></div>
</div><!-- fragment --><p >To find an element in the trie you have to call <a class="el" href="tommytrie_8h.html#a83774ac7328017d6935fc88c3879fb23" title="Searches an element in the trie.">tommy_trie_search()</a> providing the key to search.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> value_to_find = 1;</div>
<div class="line"><span class="keyword">struct </span>object* obj = <a class="code hl_function" href="tommytrie_8h.html#a83774ac7328017d6935fc88c3879fb23">tommy_trie_search</a>(&amp;trie, value_to_find);</div>
<div class="line"><span class="keywordflow">if</span> (!obj) {</div>
<div class="line">    <span class="comment">// not found</span></div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="comment">// found</span></div>
<div class="line">}</div>
<div class="ttc" id="atommytrie_8h_html_a83774ac7328017d6935fc88c3879fb23"><div class="ttname"><a href="tommytrie_8h.html#a83774ac7328017d6935fc88c3879fb23">tommy_trie_search</a></div><div class="ttdeci">void * tommy_trie_search(tommy_trie *trie, tommy_key_t key)</div><div class="ttdoc">Searches an element in the trie.</div><div class="ttdef"><b>Definition:</b> tommytrie.h:238</div></div>
</div><!-- fragment --><p >To iterate over all the elements in the trie with the same key, you have to use <a class="el" href="tommytrie_8h.html#ab6caed60ebeff23b82fe1b536852688a" title="Gets the bucket of the specified key.">tommy_trie_bucket()</a> and follow the <a class="el" href="structtommy__node__struct.html#a53338f3f5366866598ed9ac7e46e64a2" title="Next node.">tommy_node::next</a> pointer until NULL.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> value_to_find = 1;</div>
<div class="line"><a class="code hl_struct" href="structtommy__node__struct.html">tommy_node</a>* i = <a class="code hl_function" href="tommytrie_8h.html#ab6caed60ebeff23b82fe1b536852688a">tommy_trie_bucket</a>(&amp;trie, value_to_find);</div>
<div class="line"><span class="keywordflow">while</span> (i) {</div>
<div class="line">    <span class="keyword">struct </span>object* obj = i-&gt;<a class="code hl_variable" href="structtommy__node__struct.html#a6210792ec52fa1efbfb44cf4557d9b6f">data</a>; <span class="comment">// gets the object pointer</span></div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;%d\n&quot;</span>, obj-&gt;value); <span class="comment">// process the object</span></div>
<div class="line"> </div>
<div class="line">    i = i-&gt;<a class="code hl_variable" href="structtommy__node__struct.html#a53338f3f5366866598ed9ac7e46e64a2">next</a>; <span class="comment">// goes to the next element</span></div>
<div class="line">}</div>
<div class="ttc" id="astructtommy__node__struct_html_a53338f3f5366866598ed9ac7e46e64a2"><div class="ttname"><a href="structtommy__node__struct.html#a53338f3f5366866598ed9ac7e46e64a2">tommy_node_struct::next</a></div><div class="ttdeci">struct tommy_node_struct * next</div><div class="ttdoc">Next node.</div><div class="ttdef"><b>Definition:</b> tommytypes.h:216</div></div>
<div class="ttc" id="astructtommy__node__struct_html_a6210792ec52fa1efbfb44cf4557d9b6f"><div class="ttname"><a href="structtommy__node__struct.html#a6210792ec52fa1efbfb44cf4557d9b6f">tommy_node_struct::data</a></div><div class="ttdeci">void * data</div><div class="ttdoc">Pointer to the object containing the node.</div><div class="ttdef"><b>Definition:</b> tommytypes.h:228</div></div>
<div class="ttc" id="atommytrie_8h_html_ab6caed60ebeff23b82fe1b536852688a"><div class="ttname"><a href="tommytrie_8h.html#ab6caed60ebeff23b82fe1b536852688a">tommy_trie_bucket</a></div><div class="ttdeci">TOMMY_API tommy_trie_node * tommy_trie_bucket(tommy_trie *trie, tommy_key_t key)</div><div class="ttdoc">Gets the bucket of the specified key.</div></div>
</div><!-- fragment --><p >To remove an element from the trie you have to call <a class="el" href="tommytrie_8h.html#a2a68f3e28cf8e964cdd94964bde131a8" title="Searches and removes the first element with the specified key.">tommy_trie_remove()</a> providing the key to search and remove.</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>object* obj = <a class="code hl_function" href="tommytrie_8h.html#a2a68f3e28cf8e964cdd94964bde131a8">tommy_trie_remove</a>(&amp;trie, value_to_remove);</div>
<div class="line"><span class="keywordflow">if</span> (obj) {</div>
<div class="line">    free(obj); <span class="comment">// frees the object allocated memory</span></div>
<div class="line">}</div>
<div class="ttc" id="atommytrie_8h_html_a2a68f3e28cf8e964cdd94964bde131a8"><div class="ttname"><a href="tommytrie_8h.html#a2a68f3e28cf8e964cdd94964bde131a8">tommy_trie_remove</a></div><div class="ttdeci">TOMMY_API void * tommy_trie_remove(tommy_trie *trie, tommy_key_t key)</div><div class="ttdoc">Searches and removes the first element with the specified key.</div></div>
</div><!-- fragment --><p >To destroy the trie you have to remove all the elements, and deinitialize the allocator using <a class="el" href="tommyalloc_8h.html#a15897c83ab72d09c7225b9318729d5cf" title="Deinitializes the allocator.">tommy_allocator_done()</a>.</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="tommyalloc_8h.html#a15897c83ab72d09c7225b9318729d5cf">tommy_allocator_done</a>(&amp;alloc);</div>
<div class="ttc" id="atommyalloc_8h_html_a15897c83ab72d09c7225b9318729d5cf"><div class="ttname"><a href="tommyalloc_8h.html#a15897c83ab72d09c7225b9318729d5cf">tommy_allocator_done</a></div><div class="ttdeci">TOMMY_API void tommy_allocator_done(tommy_allocator *alloc)</div><div class="ttdoc">Deinitializes the allocator.</div></div>
</div><!-- fragment --><p >Note that you cannot iterate over all the elements in the trie using the trie itself. You have to insert all the elements also in a <a class="el" href="tommylist_8h.html#a45d098412d5f0be21113b252caee491b" title="Doubly linked list type.">tommy_list</a>, and use the list to iterate. See the <a class="el" href="multiindex.html">Multi-Indexing: Searching Objects in Multiple Ways</a> example for more detail. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="acfe06eea58ed9535e42b41101c6fcd9d" name="acfe06eea58ed9535e42b41101c6fcd9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfe06eea58ed9535e42b41101c6fcd9d">&#9670;&nbsp;</a></span>TOMMY_TRIE_BIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TOMMY_TRIE_BIT&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of bits of the elements to store in the trie. </p>
<p >If you need to store integers bigger than 32 bits you can increase this value.</p>
<p >Keeping this value small improves the performance of the trie. </p>

</div>
</div>
<a id="a749b14cb7dba5c94bbca91ba56bcfd62" name="a749b14cb7dba5c94bbca91ba56bcfd62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a749b14cb7dba5c94bbca91ba56bcfd62">&#9670;&nbsp;</a></span>TOMMY_TRIE_TREE_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TOMMY_TRIE_TREE_MAX&#160;&#160;&#160;(64 / sizeof(void*))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of branches on each inner node. </p>
<p >It must be a power of 2. Suggested values are 8, 16 and 32. Any inner node, excluding leafs, contains a pointer to each branch.</p>
<p >The default size is chosen to exactly fit a typical cache line of 64 bytes. </p>

</div>
</div>
<a id="a12bee56b6b3ae6ee817d641f148220f1" name="a12bee56b6b3ae6ee817d641f148220f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12bee56b6b3ae6ee817d641f148220f1">&#9670;&nbsp;</a></span>TOMMY_TRIE_BLOCK_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TOMMY_TRIE_BLOCK_SIZE&#160;&#160;&#160;(<a class="el" href="tommytrie_8h.html#a749b14cb7dba5c94bbca91ba56bcfd62">TOMMY_TRIE_TREE_MAX</a> * sizeof(void*))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Trie block size. </p>
<p >You must use this value to initialize the allocator. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a72ea06a04c9d0609d048e2ef40e8a71c" name="a72ea06a04c9d0609d048e2ef40e8a71c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72ea06a04c9d0609d048e2ef40e8a71c">&#9670;&nbsp;</a></span>tommy_trie_node</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="tommytypes_8h.html#a1e8ddf0d3a75d9c875f08324c0d98628">tommy_node</a> <a class="el" href="tommytrie_8h.html#a72ea06a04c9d0609d048e2ef40e8a71c">tommy_trie_node</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Trie node. </p>
<p >This is the node that you have to include inside your objects. </p>

</div>
</div>
<a id="a3a77169f497c9ab7b03d80cf456a08e4" name="a3a77169f497c9ab7b03d80cf456a08e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a77169f497c9ab7b03d80cf456a08e4">&#9670;&nbsp;</a></span>tommy_trie</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structtommy__trie__struct.html">tommy_trie_struct</a> <a class="el" href="tommytrie_8h.html#a3a77169f497c9ab7b03d80cf456a08e4">tommy_trie</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Trie container type. </p>
<dl class="section note"><dt>Note</dt><dd>Don't use internal fields directly, but access the container only using functions. </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5789615d52182c68ce4476150a638e24" name="a5789615d52182c68ce4476150a638e24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5789615d52182c68ce4476150a638e24">&#9670;&nbsp;</a></span>tommy_trie_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TOMMY_API void tommy_trie_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tommytrie_8h.html#a3a77169f497c9ab7b03d80cf456a08e4">tommy_trie</a> *&#160;</td>
          <td class="paramname"><em>trie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tommyalloc_8h.html#a801d4a7b732fdecfdb5e099310196821">tommy_allocator</a> *&#160;</td>
          <td class="paramname"><em>alloc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the trie. </p>
<p >You have to provide an allocator initialized with <em>both</em> the size and align with TOMMY_TRIE_BLOCK_SIZE. You can share this allocator with other tries.</p>
<p >The trie is completely allocated through the allocator, and it doesn't need to be deinitialized. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alloc</td><td>Allocator initialized with <em>both</em> the size and align with TOMMY_TRIE_BLOCK_SIZE. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6c6183ca22da291868f13cc773bf0ea4" name="a6c6183ca22da291868f13cc773bf0ea4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c6183ca22da291868f13cc773bf0ea4">&#9670;&nbsp;</a></span>tommy_trie_insert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TOMMY_API void tommy_trie_insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tommytrie_8h.html#a3a77169f497c9ab7b03d80cf456a08e4">tommy_trie</a> *&#160;</td>
          <td class="paramname"><em>trie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tommytrie_8h.html#a72ea06a04c9d0609d048e2ef40e8a71c">tommy_trie_node</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tommytypes_8h.html#aeaea2252c325c803189bcac29abeb0ef">tommy_key_t</a>&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inserts an element in the trie. </p>
<p >You have to provide the pointer of the node embedded into the object, the pointer to the object and the key to use. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>Pointer to the node embedded into the object to insert. </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to the object to insert. </td></tr>
    <tr><td class="paramname">key</td><td>Key to use to insert the object. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2a68f3e28cf8e964cdd94964bde131a8" name="a2a68f3e28cf8e964cdd94964bde131a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a68f3e28cf8e964cdd94964bde131a8">&#9670;&nbsp;</a></span>tommy_trie_remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TOMMY_API void * tommy_trie_remove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tommytrie_8h.html#a3a77169f497c9ab7b03d80cf456a08e4">tommy_trie</a> *&#160;</td>
          <td class="paramname"><em>trie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tommytypes_8h.html#aeaea2252c325c803189bcac29abeb0ef">tommy_key_t</a>&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Searches and removes the first element with the specified key. </p>
<p >If the element is not found, 0 is returned. If more equal elements are present, the first one is removed. This operation is faster than calling <a class="el" href="tommytrie_8h.html#ab6caed60ebeff23b82fe1b536852688a" title="Gets the bucket of the specified key.">tommy_trie_bucket()</a> and <a class="el" href="tommytrie_8h.html#a972019821a9ce9c9df9ad7979c5193b8" title="Removes an element from the trie.">tommy_trie_remove_existing()</a> separately. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>Key of the element to find and remove. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The removed element, or 0 if not found. </dd></dl>

</div>
</div>
<a id="ab6caed60ebeff23b82fe1b536852688a" name="ab6caed60ebeff23b82fe1b536852688a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6caed60ebeff23b82fe1b536852688a">&#9670;&nbsp;</a></span>tommy_trie_bucket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TOMMY_API <a class="el" href="tommytrie_8h.html#a72ea06a04c9d0609d048e2ef40e8a71c">tommy_trie_node</a> * tommy_trie_bucket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tommytrie_8h.html#a3a77169f497c9ab7b03d80cf456a08e4">tommy_trie</a> *&#160;</td>
          <td class="paramname"><em>trie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tommytypes_8h.html#aeaea2252c325c803189bcac29abeb0ef">tommy_key_t</a>&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the bucket of the specified key. </p>
<p >The bucket is guaranteed to contain ALL and ONLY the elements with the specified key. You can access elements in the bucket following the ::next pointer until 0. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>Key of the element to find. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The head of the bucket, or 0 if empty. </dd></dl>

</div>
</div>
<a id="a83774ac7328017d6935fc88c3879fb23" name="a83774ac7328017d6935fc88c3879fb23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83774ac7328017d6935fc88c3879fb23">&#9670;&nbsp;</a></span>tommy_trie_search()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * tommy_trie_search </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tommytrie_8h.html#a3a77169f497c9ab7b03d80cf456a08e4">tommy_trie</a> *&#160;</td>
          <td class="paramname"><em>trie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tommytypes_8h.html#aeaea2252c325c803189bcac29abeb0ef">tommy_key_t</a>&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Searches an element in the trie. </p>
<p >You have to provide the key of the element you want to find. If more elements with the same key are present, the first one is returned. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>Key of the element to find. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The first element found, or 0 if none. </dd></dl>

</div>
</div>
<a id="a972019821a9ce9c9df9ad7979c5193b8" name="a972019821a9ce9c9df9ad7979c5193b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a972019821a9ce9c9df9ad7979c5193b8">&#9670;&nbsp;</a></span>tommy_trie_remove_existing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TOMMY_API void * tommy_trie_remove_existing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tommytrie_8h.html#a3a77169f497c9ab7b03d80cf456a08e4">tommy_trie</a> *&#160;</td>
          <td class="paramname"><em>trie</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="tommytrie_8h.html#a72ea06a04c9d0609d048e2ef40e8a71c">tommy_trie_node</a> *&#160;</td>
          <td class="paramname"><em>node</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes an element from the trie. </p>
<p >You must already have the address of the element to remove. </p><dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="structtommy__node__struct.html#a6210792ec52fa1efbfb44cf4557d9b6f" title="Pointer to the object containing the node.">tommy_node::data</a> field of the node removed. </dd></dl>

</div>
</div>
<a id="aa68840eb4d3bb2fd8254d667b27f0919" name="aa68840eb4d3bb2fd8254d667b27f0919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa68840eb4d3bb2fd8254d667b27f0919">&#9670;&nbsp;</a></span>tommy_trie_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="tommytypes_8h.html#a898769f6c0236ab854368a0d93349ab9">tommy_size_t</a> tommy_trie_count </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tommytrie_8h.html#a3a77169f497c9ab7b03d80cf456a08e4">tommy_trie</a> *&#160;</td>
          <td class="paramname"><em>trie</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the number of elements. </p>

</div>
</div>
<a id="a5d1717309057bdcf2dd30afc3ea956ac" name="a5d1717309057bdcf2dd30afc3ea956ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d1717309057bdcf2dd30afc3ea956ac">&#9670;&nbsp;</a></span>tommy_trie_memory_usage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TOMMY_API <a class="el" href="tommytypes_8h.html#a898769f6c0236ab854368a0d93349ab9">tommy_size_t</a> tommy_trie_memory_usage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="tommytrie_8h.html#a3a77169f497c9ab7b03d80cf456a08e4">tommy_trie</a> *&#160;</td>
          <td class="paramname"><em>trie</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the size of allocated memory. </p>
<p >It includes the size of the <a class="el" href="tommytrie_8h.html#a72ea06a04c9d0609d048e2ef40e8a71c" title="Trie node.">tommy_trie_node</a> of the stored elements. </p>

</div>
</div>
</div><!-- contents -->
</body>
</html>
